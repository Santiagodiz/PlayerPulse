Estudiando las distribuciones de las noticias por cada jugador que habíamos seleccionado, hemos decidido descartar las noticias obtenidas con Google News, ya que nos dimos cuenta de que gran parte de ellas no hablaban sobre el jugador, sino que aparecía mencionado en la página de manera muy secundaria. Por otro lado, también hemos decidido finalmente no utilizar los tweets, ya que con las restricciones actuales de X el scrapeo se dificultaba y la gran mayoría no aportaban información relevante.
Además, hemos incluido algunos jugadores más a la lista.

Para la limpieza de los datos, queremos unificar toda la información que necesitamos para el análisis en un único archivo CSV. Para ello, primero hay que procesar previamente los datos obtenidos de las distintas fuentes:

## Cálculo del rendimiento a partir de estadísticas
Empezamos por las estadísticas de los jugadores. Teníamos un CSV por cada jugador que contenía sus estadísticas en cada partido de la temporada 2023-24.
A partir de estos datos, queremos crear una variable que mida su rendimiento en ese partido. Para ello hay que tener en cuenta la posición del jugador (por simplificar, dividimos en delanteros, centrocampistas y defensas), ya que cada una tiene funciones distintas y cada estadística deberá tener un peso mayor o menor dependiendo de la posición en la que el jugador fue colocado. Para ello, debemos asegurarnos de que todas las filas tienen un valor para la columna 'Posición'. Viendo que había valores vacíos, decidimos sustituirlos por la posición más frecuente del jugador en los partidos de la temporada, ya que es la más probable en la que jugó. Además, convertimos las posiciones en listas porque podía haber varias en el mismo partido. 
Por otro lado, algunos partidos no habían recogido suficientes estadísticas para calcular el rendimiento de forma completa, así que eliminamos estos partidos que además resultaban ser de otras competiciones distintas a LaLiga.

Para el cálculo del rendimiento, hemos decidido qué peso darle a cada estadística para cada posición. Esta asignación es subjetiva, a criterio de los diseñadores. Por cada estadística de una amplia selección, definimos el aporte que tendrá esa estadística en el rendimiento final del partido. Por ejemplo, los goles tendrán mayor peso para los delanteros que para los defensas, ya que es una función propia de los delanteros y es 'lo que se espera' de ellos, mientras que para los defensas tendrá mayor valor acciones como los despejes o las intercepciones. Después de calcular el rendimiento a partir de las estadísticas y nuestras ponderaciones, vimos que para cada posición estaban en un rango distinto. Para equilibrarlo, decidimos normalizar entre 0 y 10 por cada una de las posiciones, teniendo en cuenta todos los partidos de cada posición. Finalmente obtenemos el csv *players_unified_performance*, que junta todos los jugadores y añade sus rendimientos.

## Unificación con noticias
Para alinear los datos, hemos decidido una estructura de dataset en la que se incluyan para cada jugador pares de partidos, con sus respectivos rendimientos, y las noticias sobre él entre esos dos partidos. Para ello necesitábamos que las fechas estuvieran en el mismo formato. Hemos unido el título con el contenido para el posterior análisis de sentimiento. Por último, hemos creado el dataset unificado añadiendo el jugador, los pares de partidos consecutivos (fechas) y su rendimiento en ellos a partir del CSV anteriormente con los rendimientos, y añadido las noticias cuya fecha se encontraba entre las fechas de los dos partidos a una columna. Estos datos finales están recogidos en el archivo *processed_data.csv*.



